window.BMC=function(a,b,c){var d={};return d.cache=function(){d.$els={$document:c(b),$BMC:c("#bmc")},d.$els.$sidebar=d.$els.$BMC.find(".c-sidebar"),d.$els.$hamburger=d.$els.$BMC.find(".c-hamburger"),d.$els.$dropdownLinks=d.$els.$sidebar.find(".c-dropdown a"),d.$els.$listaActividades=d.$els.$BMC.find(".c-buscador__contenido"),d.$els.$actividades=d.$els.$listaActividades.find(".o-actividad"),d.$els.$particular=d.$els.$BMC.find(".c-actividades--particular"),d.$els.$loader=d.$els.$BMC.find(".c-loading"),d.$els.$mensaje=d.$els.$BMC.find(".c-mensaje"),d.$els.$verTodo=d.$els.$BMC.find("#volver-ver-todo"),d.$els.$twitter=d.$els.$particular.find(".c-social__boton--twitter"),d.$els.$facebook=d.$els.$particular.find(".c-social__boton--facebook"),d.url=a.location.protocol+"//"+a.location.hostname+a.location.pathname,d.idAnterior=1,d.sinResultados=!1,d.eventos={toggleSidebar:function(){d.$els.$sidebar.toggleClass("c-sidebar--abierto")},toggleDropdown:function(a){a.preventDefault();var b=c(this).parent();b.hasClass("c-sidebar__nav--abierto")?c(this).siblings(".c-dropdown__menu").first().stop(!0,!0).slideUp():c(this).siblings(".c-dropdown__menu").first().stop(!0,!0).slideDown(),b.toggleClass("c-sidebar__nav--abierto")},cerrarSidebarEsc:function(a){27==a.keyCode&&d.$els.$sidebar.removeClass("c-sidebar__nav--abierto")},toggleLoader:function(a){var b=d.$els.$loader;a?b.is(":visible")?b.hide("normal",a):b.fadeIn(d.eventos.ocultarMensaje):b.is(":visible")?b.hide():(d.eventos.ocultarMensaje(),b.fadeIn("normal",a))},ocultarMensaje:function(){d.$els.$mensaje.hide()},volver:function(a){a.preventDefault(),d.$els.$mensaje.hide(),d.$els.$particular.hide(),d.$els.$listaActividades.slideDown(),d.sinResultados&&d.$els.$actividades.fadeIn()},mostrarMensaje:function(a){d.eventos.toggleLoader(function(){d.$els.$mensaje.find("p").html("<p>"+a+"</p>").parent().fadeIn()})},mostrarTodasActividades:function(a){a.preventDefault(),d.$els.$particular.hide(),d.$els.$listaActividades.show(),d.$els.$mensaje.hide(),d.$els.$actividades.fadeIn(),d.$els.$verTodo.hide()}},d.eventos.cambiarDatosEventoParticular=function(a){var b=d.$els.$particular;if("No encontrado."===a.detail)d.eventos.mostrarMensaje("Disculpe, no se encontró el evento. Puede que ya haya terminado.");else if(void 0===a.id||a.success===!1||a.id<1)d.eventos.mostrarMensaje('Ocurrió un error al cargar el evento, podés <a href="#" id="reintentar">intentar de nuevo</a> o buscar otra actividad.');else{if(b.find(".o-actividad--particular").attr("data-id",a.id),b.find(".o-actividad__titulo").html(a.titulo),a.descripcion?b.find(".o-actividad__descripcion").html(a.descripcion):b.find(".o-actividad__descripcion").html(""),""!=a.imagen?b.find("img").attr("src",a.imagen.thumbnail):b.find("img").attr("src",buscarActividad.imagen),a.agrupador?b.find(".o-actividad__evento").html("<b>"+a.agrupador.nombre+"<b>").show():b.find(".o-actividad__evento").html("").hide(),a.fecha_actividad?b.find(".o-actividad__fecha-actividad").html(a.fecha_actividad):b.find(".o-actividad__fecha-actividad").html(""),a.fecha_inicia?b.find(".o-actividad__fecha-inicia").html("<b>Inicia:</b> "+a.fecha_inicia).show():b.find(".o-actividad__fecha-inicia").html("").hide(),a.fecha_termina?b.find(".o-actividad__fecha-termina").html("<b>Termina:</b> "+a.fecha_termina).show():b.find(".o-actividad__fecha-termina").html("").hide(),a.tipos){var c=a.tipos,e="";for(var f in c)e+='<span class="c-tipos__tipo">'+c[f].nombre+"</span>";b.find(".c-tipos").html(e).show()}else b.find(".c-tipos").html("").hide();a.lugar?b.find(".o-actividad__lugar").html("<b>Lugar:</b> "+a.lugar.nombre+(a.lugar.descripcion&&" ("+a.lugar.descripcion+")")).show():b.find(".o-actividad__lugar").html("").hide(),d.idAnterior=a.id,d.eventos.toggleLoader(function(){b.fadeIn()})}},d.eventos.buscarResultadoAjax=function(a){d.eventos.toggleLoader(),c.ajax({type:"POST",dataType:"JSON",url:buscarActividad.url,data:a,success:function(a){a.data?d.eventos.cambiarDatosEventoParticular(a.data):(alert("Sin respuesta"),c(".c-atras").click(),d.eventos.toggleLoader())},error:function(a){c(".c-atras").click(),d.eventos.toggleLoader()}})},d.eventos.buscarResultado=function(a){var b=a.attr("data-id"),c={action:"buscar_actividad",nonce:buscarActividad.nonce,id:b};d.eventos.buscarResultadoAjax(c)},d.eventos.clickEnActividad=function(a){d.$els.$listaActividades.hide(),c(a.target).parents("li").attr("data-id")!=d.idAnterior?d.eventos.buscarResultado(c(a.target).parents("li")):d.$els.$particular.fadeIn()},d.eventos.compartirFacebook=function(b){b.preventDefault();var e=c(b.target).parents(".o-actividad").attr("data-id");return a.open("https://www.facebook.com/sharer/sharer.php?u="+d.url+"?ac="+e,"pop","width=600, height=400, 'menubar=0,location=0,toolbar=0,status=0,scrollbars=1'"),!1},d.eventos.compartirTwitter=function(b){b.preventDefault();var e=c(b.target).parents(".o-actividad");return a.open("http://twitter.com/home?status="+e.find(".o-actividad__titulo").text()+" "+d.url+"?ac="+e.attr("data-id"),"pop","width=600, height=300, 'menubar=0,location=0,toolbar=0,status=0,scrollbars=1'"),!1},d.eventos.filtrar=function(a){d.$els.$particular.is(":visible")&&d.eventos.volver(a),d.eventos.toggleLoader();var b=c(this),e=d.$els.$actividades,f=e.length,g=[];if(filtro=b.attr("data-filtro"),id=b.attr("data-id"),e.hide(),"tipo"==filtro||"disciplina"==filtro){for(var h=0;h<f;h++){var i=e.eq(h).attr("data-"+filtro).split("|");i.pop(),c.inArray(id,i)>=0&&g.push(e.eq(h))}c.each(g,function(a,b){c(b).fadeIn()})}else g=d.$els.$listaActividades.find("li[data-"+filtro+'="'+id+'"]').fadeIn();g.length<1?(d.sinResultados=!0,d.$els.$listaActividades.hide(),d.eventos.mostrarMensaje('No se encontraron resultados. <a id="ver-todo" href="#">Ver todas las actividades</a>')):(d.sinResultados=!1,d.eventos.toggleLoader(),d.$els.$verTodo.show()),d.eventos.toggleSidebar()}},d.init=function(){d.cache(),c(".c-atras").click(d.eventos.volver),c(".c-sidebar__toggle").on("click",d.eventos.toggleSidebar),d.$els.$hamburger.on("click",d.eventos.toggleSidebar),d.$els.$dropdownLinks.on("click",d.eventos.toggleDropdown),d.$els.$document.keyup(d.eventos.cerrarSidebarEsc),d.$els.$document.on("click",".c-buscador__contenido .o-actividad",d.eventos.clickEnActividad),d.$els.$document.on("click","#reintentar",function(a){a.preventDefault(),d.eventos.buscarResultadoAjax({action:"buscar_actividad",nonce:buscarActividad.nonce,id:d.idAnterior})}),d.$els.$facebook.click(d.eventos.compartirFacebook),d.$els.$twitter.click(d.eventos.compartirTwitter),d.$els.$document.on("click",".c-dropdown__item",d.eventos.filtrar),d.$els.$document.on("click","#ver-todo",d.eventos.mostrarTodasActividades),d.$els.$document.on("click","#volver-ver-todo",d.eventos.mostrarTodasActividades),void 0!==buscarActividad.actividad&&(d.$els.$listaActividades.hide(),d.eventos.buscarResultadoAjax({action:"buscar_actividad",nonce:buscarActividad.nonce,id:buscarActividad.actividad}))},c(b).ready(d.init),d}(window,document,jQuery);